<h3 class="mb-3"><i class="fa fa-cog me-2"></i>Settings</h3>

<% if (error) { %>
  <div class="alert alert-danger">
    <i class="fa fa-triangle-exclamation"></i>
    <div><b>Error</b><br><%= error %></div>
  </div>
<% } %>
<% if (success) { %>
  <div class="alert alert-success">
    <i class="fa fa-check"></i>
    <div><b>Success</b><br><%= success %></div>
  </div>
<% } %>

<ul class="nav nav-tabs mb-3" role="tablist">
  <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile">Profile</button></li>
  <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#twitter">Twitter</button></li>
  <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#password">Change Password</button></li>
</ul>

<div class="tab-content">
  <!-- Profile -->
  <div class="tab-pane fade show active" id="profile">
    <div class="card lift">
      <div class="card-title">Profile</div>
      <form method="post" action="/settings/profile">
        <label class="form-label">Username</label>
        <input class="form-control mb-2" name="username" value="<%= user.username || '' %>">

        <label class="form-label">Email</label>
        <input class="form-control mb-2" type="email" name="email" value="<%= user.email || '' %>">

        <label class="form-label">Phone (08…)</label>
        <input class="form-control mb-3" name="phone" value="<%= user.phone || '' %>">

        <button class="btn btn-primary ripple">Save</button>
      </form>
    </div>
  </div>

  <!-- Twitter -->
  <div class="tab-pane fade" id="twitter">
    <div class="split-2">
      <div class="card lift">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <div class="card-title m-0">Setup Twitter API</div>
          <span class="badge <%= twitterStatus.includes('Connected')?'badge-success':'badge-danger' %>">
            <%= twitterStatus %>
          </span>
        </div>
        <div>
          <div class="mb-2">
            <label class="form-label">API Key</label>
            <input class="form-control" id="apiKey" name="apiKey">
          </div>
          <div class="mb-2">
            <label class="form-label">API Key Secret</label>
            <input class="form-control" id="apiSecret" name="apiSecret">
          </div>
          <div class="mb-2">
            <label class="form-label">Access Token</label>
            <input class="form-control" id="accessToken" name="accessToken">
          </div>
          <div class="mb-3">
            <label class="form-label">Access Token Secret</label>
            <input class="form-control" id="accessSecret" name="accessSecret">
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-info text-white ripple" type="button" id="testBtn">
              <i class="fa fa-plug"></i> Test Connection
            </button>
            <button class="btn btn-primary ripple" type="button" id="connectBtn">
              <i class="fa fa-save"></i> Connect & Save
            </button>
          </div>
        </div>
      </div>

      <div class="card lift">
        <div class="card-title">Cara Mendapatkan API Key</div>
        <ol class="mb-2">
          <li>Buka <a href="https://developer.twitter.com/" target="_blank">Twitter Developer Portal</a></li>
          <li>Buat <b>Project</b> & <b>App</b></li>
          <li>Buka <b>Keys & Tokens</b> → generate:
            <ul>
              <li><code>API Key</code> & <code>API Key Secret</code></li>
              <li><code>Access Token</code> & <code>Access Token Secret</code></li>
            </ul>
          </li>
          <li>Masukkan ke form di samping lalu <b>Test</b> & <b>Connect</b></li>
        </ol>
        <p class="text-muted">Jangan bagikan credential kepada siapapun.</p>
      </div>
    </div>
  </div>

  <!-- Password -->
  <div class="tab-pane fade" id="password">
    <div class="card lift">
      <div class="card-title">Change Password</div>
      <form method="post" action="/settings/change-password">
        <label class="form-label">Password Lama</label>
        <input class="form-control mb-2" type="password" name="oldPassword" required>

        <label class="form-label">Password Baru</label>
        <input class="form-control mb-2" type="password" name="newPassword" required>

        <label class="form-label">Konfirmasi Password Baru</label>
        <input class="form-control mb-3" type="password" name="confirmPassword" required>

        <button class="btn btn-primary ripple">Update</button>
      </form>
    </div>
  </div>
</div>
